<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audience Engagement Insights for {{ account.account_name }}</title>
</head>
<body>
    <h1>Audience Engagement Insights for {{ account.account_name }}</h1>

    <h2>Overall Insights</h2>
    {% if insights %}
        <ul>
            {% for insight in insights %}
                <li>Date: {{ insight.date }} - Likes: {{ insight.likes }} - Comments: {{ insight.comments }} - Shares: {{ insight.shares }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No overall engagement insights available.</p>
    {% endif %}

    <h2>Post-Level Engagement</h2>
    {% if engagement_data %}
        <ul>
        {% for data in engagement_data %}
            <li>
                <strong>Post:</strong> {{ data.post.post_content }} <br>
                <strong>Likes:</strong> {{ data.engagement.likes }} <br>
                <strong>Comments:</strong> {{ data.engagement.comments }} <br>
                <strong>Shares:</strong> {{ data.engagement.shares }} <br>
                <strong>Reach:</strong> {{ data.engagement.reach }} <br>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No post-level engagement data available.</p>
    {% endif %}

    <h2>Engagement by Post</h2>
    {% if posts %}
        <table border="1">
            <thead>
                <tr>
                    <th>Post Title</th>
                    <th>Likes</th>
                    <th>Comments</th>
                    <th>Shares</th>
                    <th>Reach</th>
                </tr>
            </thead>
            <tbody>
                {% for post in posts %}
                    <tr>
                        <td>{{ post.title }}</td>
                        <td>{{ post.likes }}</td>
                        <td>{{ post.comments }}</td>
                        <td>{{ post.shares }}</td>
                        <td>{{ post.reach }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No posts available for detailed engagement analysis.</p>
    {% endif %}
</body>
</html>
